<html>

  <head>
    <title>Map!</title>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://unpkg.com/topojson@3"></script>
    <style>
    </style>


  </head>

  <body>
    <svg id="map" width=600 height=400>
      <rect width=600 height=400 fill="#00386f"></rect>
    </svg>
  </body>

      <script type="text/javascript">
      d3.csv("latindance.csv", function(error, data) {
       if(error){
         console.log("Error!!!");
       }
       else{
         console.log("CSV dataArray");
         console.log(data);
       }
     });
     </script>

  <script>

        //loading a lot of data
        d3.queue()
          .defer(d3.json, "world.json")
          .awaitAll(function(error, dataArray){
            var data = dataArray[0];
            console.log(dataArray);

        d3.json("world.json", function(error, data){

            var geoJSON = topojson.feature(data, data.objects.countries);

          geoJSON.features = geoJSON.features.filter(function(feature) {
            return feature.id != "AQ";
          });

          var proj = d3.geoMercator()
             .fitSize([600, 400], geoJSON);

          var path = d3.geoPath()
             .projection(proj);

         var colorScale = d3.scaleLinear()
             .domain([Hongkong, Russia])
             .range(["#ffd8d8", "#6f0000"]);

          var countryLookup = {
             RU: "Russia",
             US: "America"
             IT: "Italy"
             GT: "Great Britain"
             DE: "Germany"
             PL: "Poland"
             CN: "China"
             JP: "Japan"
             AZ: "Azerbaijan"
             UA: "Ukraine"
             CA: "Canada"
             IL: "Israel"
             LT: "Lithuania"
             TW: "Chinese Taipei"
             AT: "Australia"
             LV: "Latvia"
             KR: "South Korea"
             NL: "Netherlands"
             HK: "Hong Kong"
           };

        .attr("fill", function(d) {
            var countryName = countryLookup[d.id];
            var countryData = csvData.filter(function(d) { return d.Country == countryName; });
            return colorScale(countryData[0].Country);
          })

          var countries = d3.select("#map").selectAll("path")
              .data(geoJSON.features);

          countries.enter().append("path")
              .attr("fill", function(feature){
                if (feature.id == "US") {
                  return "#6f0000";
                }
                else {
                  return "#00264b";


              })



              .attr("stroke", "white")
              .attr("stroke-width", 1)
              .attr("d", function(feature) {
                  return path(feature);
      });

            var points = [
                {"name": "Boston", "coords": [-71.0589, 42.3601]},
                {"name": "London", "coords": [-0.1278, 51.5074]}
            ];

            var dots = d3.select("#map").selectAll("circle")
               .data(points);

            dots.enter().append("circle")
               .attr("transform", function(point) {
                 return "translate( " + proj(point.coords) + " )"
               })
               .attr("fill", "black")
               .attr("r", 8);
             });
    });

  </script>




</html>
